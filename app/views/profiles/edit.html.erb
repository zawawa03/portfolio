<% breadcrumb :profile_edit, @profile %>
<% set_meta_tags title: t(".title") %>
<div class="container">
  <div class="row">
    <div class="col-5 offset-3 my-5 p-4 rounded" id="profile-edit-form">
      <h3 class="d-flex justify-content-center my-3"><%= t(".title") %></h3>
      <%= form_with model: @profile, url: profile_path, locals: true do |f| %>
        <%= render partial: "shared/error_message", locals: { object: @profile } %>

        <div class="mt-3">
          <%= f.label :nickname, class: "form-label" %>
          <%= f.text_field :nickname, autofocus: true , class: "form-control" %>
        </div>
        <div class="mt-3">
          <%= f.label :sex, class: "form-label" %>
          <%= f.select :sex, Profile.sexes.keys.map{ |k| [t("enums.profile.sex.#{k}"), k] }, {}, class: "form-select" %>
        </div>
        <div class="mt-3">
          <%= f.label :introduction, "自己紹介文（255文字以内）", class: "form-label" %>
          <%= f.text_area :introduction, class: "form-control", id: "exampleFormControlTextarea1", rows: "6" %>
        </div>
        <div class="mt-3">
          <%= f.label :avatar, class: "form-label" %>
          <%= f.file_field :avatar, class: "form-control", id: "file_field" %>
        </div>
        <label class="mt-3">画像プレビュー</label>
        <div  class="rounded-circle mt-3" id="preview_field">
          <% if @profile.avatar.attached? %>
            <%= image_tag @profile.decorate.avatar_image(150, 150), class: "rounded-circle" %>
          <% end %>  
        </div><div class="d-flex justify-content-center mt-5 mb-3" id="session_btn_area">
          <%= f.submit t("helpers.submit.update"), id: "session_btn" %>
        </div>
      <% end %>
    </div>
  </div>
</div>